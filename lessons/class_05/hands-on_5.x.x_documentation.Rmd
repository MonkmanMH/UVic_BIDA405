---
title: "Documentation"
subtitle: ""
output:
  html_document:
    df_print: paged
---

<!-- 
This file by Martin Monkman is licensed under a Creative Commons Attribution 4.0 International License. 
-->

```{r setup}
library(readr)
library(readxl)
library(openxlsx)
library(feather)

```

> Document and comment your code for yourself as if you will need to understand it in 6 months. 
—Jenny Bryan


## Objectives

* Demonstrate understanding of exporting tables and other objects (saving files) in R

* Demonstrate understanding of the pros and cons of each file format, including context for use


## Documentation and Recordkeeping

The reasons for documenting our workflow are similar to the reasons we would save and output our cleaned data file: 

* To make the project available to a collaborator. 

* To provide a record when we move to different jobs or projects (we would want others to do that for us!).

* To create a save point in our workflow, so that we can continue our work later but without having to go through all the steps to remember everything we've done.

![unfinished work](unfinished_work_400.png)

_Source: [monkeyuser.com](https://www.monkeyuser.com/2018/unfinished-work/), 2018-07-03_


There doesn't seem to be a single-best how-to instruction on "documentation" in the context of data science. The term appears in the periphery of some of the textbooks and manuals on how to do data science, and there are some journal articles that address documentation in the context of reproducible research. It seems what advice there is tends to be prescriptive at a high level, and not overly descriptive of what makes good documentation.

The recent blog post by Randy Au ^[["Let's Get Intentional About Documentation"](https://counting.substack.com/p/lets-get-intentional-about-documentation), 2020-09-29] expresses on key idea in the title, and builds on it: we need to be intentional in our actions around documentation (or as he argues, a better term might be "recordkeeping").

>Recordkeeping is keeping records, notes, and artifacts around to **help in creating documentation in the future.** It’s done by the people involved in doing the actual work saving things and making clarifications that only they really understand, with no expectation that someone else needs to understand everything. The material collected is primarily intended for use to write the actual documentation. Think of it as preserving raw data for future use.

I like the way this is framed. "Documentation" then becomes a fully-realized user manual, suitable for complex and recurring projects with many different contributors, and that might be considered mission critical. A lot of data science work doesn't meet those criteria, so what we need isn't "documentation" but the notes that someone could use to build the documentation.

If it's a one-off project, you can probably have a minimum (but not zero!) recordkeeping. But a project that repeats on a regular schedule (whether daily or annually) should have more robust recordkeeping, and potentially some documentation.

And it's important to think about this at the beginning—maybe even _before_ the beginning. Then it gets built into the process and your daily workflow, and becomes part of the work. For example, record the source of your data as you're downloading it, or make comments about why you chose a particular function as soon as you incorporate the function into your script. These habits will not only capture what you're thinking at the time, but will also encourage you to think about the "why" of your decisions—and perhaps lead you to a different choice.

For those working in an academic setting, Marwick, Boettiger and Mullen have defined three generic principles for what should be included in a research compendia. These principles can also be adapted to other settings:

* Organize the files according to the prevailing standards. 

* Maintain a clear separation of data, method, and output.

* Specify the computational environment that was used.

^[Ben Marwick, Carl Boettiger & Lincoln Mullen, "Packaging Data Analytical Work Reproducibly Using R (and Friends)", _The American Statistician_, 72: Special Issue on Data Science (2018)], p.81(https://www.tandfonline.com/doi/abs/10.1080/00031305.2017.1375986?journalCode=utas20)

Marwick, Boettiger and Mullen provide some concrete examples of that a file structure might look like; their figure showing a "medium compendia" is below:



### Elements of effective recordkeeping

There are three things to capture in your recordkeeping:

1. The why and how of the decisions made.

1. How things work together. 

1. How to make changes.



So what are the elements of effective recordkeeping? Some of the things to capture:

* A brief description of the project, analysis, and research objective.

* Diagrams that capture logic, flow, and inter-relationships.

* Detailed information about the data source:

  - Name of organization that collected the data
  
  - Name and contact information of individual at that organization
  
  - Date of download or extract
  
  - Web links
  
  - Original file names
  
  - Links to additional documentation about the data, such as the data dictionary

* A high-level statement about _how_ the analysis was done

  - "This analysis used the daily data from 2010 through 2019 to calculate average per month volumes, which were then used in an ARIMA model to develop a 6 month forecast".


* Details about the analysis and code:

  - Things that informed decisions ("I chose this statistical test because..." or "The variable date of birth was transformed into 'Age on July 1, 2020' because...")
  
  - The instruction list—descriptive text to describe what chunks of code are doing

  - The data dictionary or code book

  - A map of the file folder structure


* Details about the software and packages used:

  - Versions and (if available) dates


## Some more details

### The instruction list

The instruction list is descriptive text that describes what chunks of code are doing.

* Knuth's "Literate Programming"

* Ellis and Leek "How to Share Data for Collaboration" (2.4 The Instruction List))



### The data dictionary or code book

See Ellis and Leek, ["How to Share Data for Collaboration"]()


## Tools to help with documentation
  
  - [{packrat}](https://rstudio.github.io/packrat/)





## REFERENCES

Randy Au, ["Let's Get Intentional About Documentation"](https://counting.substack.com/p/lets-get-intentional-about-documentation), 2020-09-29

Randy Au, ["Data Science Practice 101: Always Leave An Analysis Paper Trail"](https://towardsdatascience.com/data-science-practice-101-always-leave-an-analysis-paper-trail-cc17079fae5a), 2019-04-16

Buttery and Whitaker, chapter 7.6



